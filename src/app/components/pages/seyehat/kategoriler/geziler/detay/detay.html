<!-- Yükleniyor / Hata -->
<div *ngIf="loading" class="loading">Yükleniyor…</div>
<div *ngIf="!loading && error" class="error">{{ error }}</div>

<!-- İçerik -->
<div *ngIf="!loading && !error && ilan as m" class="detay-wrapper">

  <div class="topbar">
    <!-- gerekirse ['/'] yap -->
    <a [routerLink]="['/seyehat/geziler']" class="back-link">← Geri</a>
  </div>

  <!-- Kullanıcı -->
  <div class="user-bar">
    <ng-container *ngIf="m.userAvatarUrl; else initials">
      <img [src]="m.userAvatarUrl" alt="avatar" class="avatar" />
    </ng-container>
    <ng-template #initials>
      <div class="avatar avatar--initial">{{ (m.createdBy || 'U').charAt(0) }}</div>
    </ng-template>

    <div class="user-meta">
      <div class="name">{{ m.createdBy || 'İlan Sahibi' }}</div>
      <div class="sub">
        Oluşturulma:
        <ng-container *ngIf="m.createdAt; else noCreated">
          {{ m.createdAt | date:'d MMMM y, HH:mm' }}
        </ng-container>
        <ng-template #noCreated>—</ng-template>
      </div>
    </div>
  </div>

  <!-- Başlık -->
  <h1 class="title">{{ m.title || 'Başlık Yok' }}</h1>

  <!-- Açıklama -->
  <p class="desc">
    {{ m.description || 'Açıklama bulunmuyor.' }}
  </p>

  <!-- Bilgi kutuları -->
  <div class="info-grid">
    <div class="info-card">
      <div class="label">Etkinlik Zamanı</div>
      <div class="value">
        <ng-container *ngIf="m.dateTime; else noTime">
          {{ m.dateTime | date:'d MMMM y, HH:mm' }}
        </ng-container>
        <ng-template #noTime>—</ng-template>
      </div>
    </div>

    <div class="info-card">
      <div class="label">Konum</div>
      <div class="value">
        {{ (m.city || '—') }}<ng-container *ngIf="m.district"> / {{ m.district }}</ng-container>
      </div>
    </div>
  </div>

  <!-- Aksiyon -->
  <div class="actions">
    <button type="button" class="ellipse-btn ellipse-btn--block" (click)="onBulBeniClick()">
      Buldum Seni
    </button>
  </div>
</div>
