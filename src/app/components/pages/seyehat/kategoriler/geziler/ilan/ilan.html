<!-- components/pages/seyehat/kategoriler/geziler/ilan/ilan.html -->
<div class="create-wrapper">

  <!-- ===== Başlık ===== -->
  <div class="pill">Etkinlik Başlığı</div>
  <div class="title-panel">
    <input
      class="title-input"
      type="text"
      [attr.maxlength]="maxTitleLen"
      [value]="title"
      (input)="title = ($any($event.target).value || '')"
      placeholder="Etkinlik başlığını girin" />
    <div class="counter">{{ (title || '').length }}/{{ maxTitleLen }}</div>
  </div>

  <!-- ===== Açıklama ===== -->
  <div class="pill" style="margin-top:14px;">Açıklama</div>
  <div class="title-panel">
    <textarea
      class="title-input"
      rows="5"
      [attr.maxlength]="maxDescLen"
      [value]="description"
      (input)="description = ($any($event.target).value || '')"
      placeholder="Etkinlik açıklamasını yazın"></textarea>
    <div class="counter">{{ (description || '').length }}/{{ maxDescLen }}</div>
  </div>

<div class="date-time-row">
  <!-- Tarih -->
  <mat-form-field appearance="fill" class="field">
  <mat-label>Etkinlik Tarihi</mat-label>
  <input matInput [matDatepicker]="picker" [(ngModel)]="eventDate" placeholder="gg.aa.yyyy">
  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
  <mat-datepicker #picker></mat-datepicker>
</mat-form-field>


  <!-- Saat (dropdown) -->
  <mat-form-field appearance="fill" class="field">
    <mat-label>Saat</mat-label>
    <mat-select [(ngModel)]="selectedTime" placeholder="Saat seç">
      <mat-option *ngFor="let t of timeOptions" [value]="t">{{ t }}</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<!-- (isteğe bağlı) seçilen birleşik ISO önizleme -->
<!-- <div>{{ combinedIso }}</div> -->








  <!-- ===== Konum (İl + İlçe) ===== -->
  <div class="pill" style="margin-top:14px;">Konum</div>
  <div class="title-panel">
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
      <!-- İl -->
      <div>
        <label class="field-label">İl</label>
        <select
          class="title-input"
          [value]="selectedCityId ?? ''"
          (change)="onCityChange( +($any($event.target).value) )">
          <option value="">İl seç</option>
          <option *ngFor="let c of cities" [value]="c.id">{{ c.name }}</option>
        </select>
      </div>

      <!-- İlçe -->
      <div>
        <label class="field-label">İlçe</label>
        <select
          class="title-input"
          [disabled]="!selectedCityId"
          [value]="selectedDistrictId ?? ''"
          (change)="onDistrictChange( +($any($event.target).value) )">
          <option value="">{{ selectedCityId ? 'İlçe seç' : 'Önce il seçin' }}</option>
          <option *ngFor="let d of districts" [value]="d.id">{{ d.name }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- ===== Gönder ===== -->
  <div class="actions" style="margin-top:16px;">
    <button
      type="button"
      class="primary-btn"
      (click)="submitIlan()"
      [disabled]="sending || !formValid()"
      aria-label="Bul Beni - ilanı kaydet">
      Bul Beni
    </button>
  </div>

  <!-- ===== Durum ===== -->
  <div class="status-area" aria-live="polite" style="margin-top:12px;">
    <div *ngIf="sending">⏳ Gönderiliyor…</div>
    <div *ngIf="sendOk" class="celebrate">🎉 İlan oluşturuldu!</div>
    <div *ngIf="sendErr" class="error">❌ İlan gönderilemedi. Lütfen tekrar deneyin.</div>
  </div>

</div>
