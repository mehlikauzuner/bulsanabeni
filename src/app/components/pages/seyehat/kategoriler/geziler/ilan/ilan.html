<!-- components/pages/seyehat/kategoriler/geziler/ilan/ilan.html -->
<div class="create-wrapper">

  <!-- ===== Başlık ===== -->
  <div class="pill">Etkinlik Başlığı</div>
  <div class="title-panel">
    <input
      class="title-input"
      type="text"
      [attr.maxlength]="maxTitleLen"
      [value]="title"
      (input)="title = ($any($event.target).value || '')"
      placeholder="Etkinlik başlığını girin" />
    <div class="counter">{{ (title || '').length }}/{{ maxTitleLen }}</div>
  </div>

  <!-- ===== Açıklama ===== -->
  <div class="pill" style="margin-top:14px;">Açıklama</div>
  <div class="title-panel">
    <textarea
      class="title-input"
      rows="5"
      [attr.maxlength]="maxDescLen"
      [value]="description"
      (input)="description = ($any($event.target).value || '')"
      placeholder="Etkinlik açıklamasını yazın"></textarea>
    <div class="counter">{{ (description || '').length }}/{{ maxDescLen }}</div>
  </div>

  <!-- ===== Tarih & Saat ===== -->
  <div class="pill" style="margin-top:14px;">Tarih &amp; Saat</div>
  <div class="title-panel">
    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
      <!-- Tarih -->
      <input
        class="title-input"
        type="date"
        [value]="eventDate || ''"
        (change)="eventDate = ($any($event.target).value || null)" />

      <!-- Saat (select — 0..23) -->
      <select
        class="title-input"
        [value]="selectedHour ?? ''"
        (change)="selectedHour = +($any($event.target).value)">
        <option value="">Saat</option>
        <option [value]="0">00:00</option>
        <option [value]="1">01:00</option>
        <option [value]="2">02:00</option>
        <option [value]="3">03:00</option>
        <option [value]="4">04:00</option>
        <option [value]="5">05:00</option>
        <option [value]="6">06:00</option>
        <option [value]="7">07:00</option>
        <option [value]="8">08:00</option>
        <option [value]="9">09:00</option>
        <option [value]="10">10:00</option>
        <option [value]="11">11:00</option>
        <option [value]="12">12:00</option>
        <option [value]="13">13:00</option>
        <option [value]="14">14:00</option>
        <option [value]="15">15:00</option>
        <option [value]="16">16:00</option>
        <option [value]="17">17:00</option>
        <option [value]="18">18:00</option>
        <option [value]="19">19:00</option>
        <option [value]="20">20:00</option>
        <option [value]="21">21:00</option>
        <option [value]="22">22:00</option>
        <option [value]="23">23:00</option>
      </select>
    </div>

    <div class="hint" *ngIf="eventDate">
      Seçilen: {{ eventDate }}
      {{ selectedHour != null ? ((selectedHour < 10 ? '0'+selectedHour : selectedHour)+':00') : '' }}
    </div>
  </div>

  <!-- ===== Konum (İl + İlçe) ===== -->
  <div class="pill" style="margin-top:14px;">Konum</div>
  <div class="title-panel">
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
      <!-- İl -->
      <div>
        <label class="field-label">İl</label>
        <select
          class="title-input"
          [value]="selectedCityId ?? ''"
          (change)="onCityChange( +($any($event.target).value) )">
          <option value="">İl seç</option>
          <option *ngFor="let c of cities" [value]="c.id">{{ c.name }}</option>
        </select>
      </div>

      <!-- İlçe -->
      <div>
        <label class="field-label">İlçe</label>
        <select
          class="title-input"
          [disabled]="!selectedCityId"
          [value]="selectedDistrictId ?? ''"
          (change)="onDistrictChange( +($any($event.target).value) )">
          <option value="">{{ selectedCityId ? 'İlçe seç' : 'Önce il seçin' }}</option>
          <option *ngFor="let d of districts" [value]="d.id">{{ d.name }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- ===== Gönder ===== -->
  <div class="actions" style="margin-top:16px;">
    <button
      type="button"
      class="primary-btn"
      (click)="submitIlan()"
      [disabled]="sending || !formValid()"
      aria-label="Bul Beni - ilanı kaydet">
      Bul Beni
    </button>
  </div>

  <!-- ===== Durum ===== -->
  <div class="status-area" aria-live="polite" style="margin-top:12px;">
    <div *ngIf="sending">⏳ Gönderiliyor…</div>
    <div *ngIf="sendOk" class="celebrate">🎉 İlan oluşturuldu!</div>
    <div *ngIf="sendErr" class="error">❌ İlan gönderilemedi. Lütfen tekrar deneyin.</div>
  </div>

</div>
