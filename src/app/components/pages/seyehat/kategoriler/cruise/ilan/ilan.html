<div class="create-wrapper">
  <div class="user-bar" *ngIf="user as u">
    <div class="avatar">
      <span>{{ (u.fullName || 'U').charAt(0) }}</span>
    </div>
    <div class="user-meta">
      <div class="name">{{ u.fullName }}</div>
      <div class="sub">Kayıt Tarihi: {{ u.joinedAt | date:'d MMMM y' }}</div>
    </div>
  </div>

  <!-- PILL başlık -->
  <div class="pill-title">İlan Başlığı</div>

  <!-- Lila panel -->
  <div class="title-panel">
    <input
      class="title-input"
      type="text"
      [(ngModel)]="title"
      [attr.maxlength]="maxTitleLen"
      required
      placeholder="Etkinlik başlığını girin (örn: Hafta Sonu Trekking Turu)"
      aria-describedby="titleHelp titleCount"
    />
    <div id="titleHelp" class="hint">Kısa ve net bir başlık yaz.</div>
    <div id="titleCount" class="char-count">{{ title.length }}/{{ maxTitleLen }}</div>
  </div>

  <!-- Açıklama pill -->
  <div class="pill-title">Açıklama</div>

  <!-- Lila panel -->
  <div class="desc-panel">
    <textarea
      class="desc-input"
      [(ngModel)]="description"
      [attr.maxlength]="maxDescLen"
      rows="4"
      required
      placeholder="Etkinlik hakkında detaylı bilgi verin. Nerede, ne zaman, kimlerle, ne yapılacak?"
      aria-describedby="descHelp descCount"
    ></textarea>
    <div id="descHelp" class="hint">
      Katılımcıların doğru beklentiye sahip olması için mümkün olduğunca detay ekleyin.
    </div>
    <div id="descCount" class="char-count">{{ description.length }}/{{ maxDescLen }}</div>
  </div>

  <!-- Tarih & Saat pill -->
  <div class="pill-title">Tarih & Saat</div>

  <!-- Lila panel -->
  <div class="date-time-panel">
    <!-- Tarih (takvim) -->
    <mat-form-field appearance="outline" class="date-field" style="flex:1">
      <mat-label>Tarih</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        [(ngModel)]="selectedDate"
        [min]="minDate"
        placeholder="Tarih seçin"
        required
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker startView="multi-year" touchUi="true"></mat-datepicker>
    </mat-form-field>

    <!-- Saat -->
    <div class="time-select" style="flex:1; display:flex;">
      <select [(ngModel)]="selectedTime" required style="flex:1" autocomplete="off">
        <option [ngValue]="null" disabled [selected]="selectedTime===null">Saat</option>
        <option *ngFor="let t of times" [ngValue]="t" [disabled]="isPastTimeOnSelectedDate(t)">
          {{ t }}
        </option>
      </select>
    </div>
  </div>
</div>
